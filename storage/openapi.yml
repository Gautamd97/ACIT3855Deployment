openapi: 3.0.0
info:
  title: Hospital Storage API
  version: "1.0.0"
  description: Stores hospital admission/capacity records and supports time-range queries.

paths:
  /hospital/admission:
    post:
      summary: Store a single admission/discharge event (one item incl. batch metadata)
      operationId: app.create_admission_discharge
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201': { description: Created }
        '400': { description: Bad request }

    get:
      summary: Get admission/discharge events between two timestamps
      description: Returns all events whose date_created (or recorded_at fallback) is >= start and < end.
      operationId: app.get_admission_readings
      parameters:
        - in: query
          name: start_timestamp
          description: Start of the timespan (inclusive)
          required: true
          schema:
            type: string
            format: date-time
            example: "2025-10-14T00:00:00Z"
        - in: query
          name: end_timestamp
          description: End of the timespan (exclusive)
          required: true
          schema:
            type: string
            format: date-time
            example: "2025-10-15T23:59:59Z"
      responses:
        '200':
          description: Successfully returned admission/discharge events
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /hospital/capacity:
    post:
      summary: Store a single capacity snapshot (one item incl. batch metadata)
      operationId: app.create_capacity
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201': { description: Created }
        '400': { description: Bad request }

    get:
      summary: Get capacity snapshots between two timestamps
      description: Returns all capacity snapshots whose date_created (or recorded_at fallback) is >= start and < end.
      operationId: app.get_capacity_readings
      parameters:
        - in: query
          name: start_timestamp
          description: Start of the timespan (inclusive)
          required: true
          schema:
            type: string
            format: date-time
            example: "2025-10-14T00:00:00Z"
        - in: query
          name: end_timestamp
          description: End of the timespan (exclusive)
          required: true
          schema:
            type: string
            format: date-time
            example: "2025-10-15T23:59:59Z"
      responses:
        '200':
          description: Successfully returned capacity snapshots
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object